{% extends 'portal/layouts/base.html' %}
{% load static %}

{% block extra_script %}
    <script type="importmap">
        {
            "imports": {
                "vue": "//unpkg.com/vue@3/dist/vue.esm-browser.prod.js"
            }
        }
    </script>

    <script type="module">
        import { createApp } from 'vue'
        import ava_dashboard from '{% static "dashboard/js/app.js" %}'

        createApp(ava_dashboard).mount('#app')
    </script>
{% endblock extra_script %}

{% block main %}
    <main>
        <div id="app">
            <section>
                <div id='grid-header'>
                    <h1>Minhas disciplinas</h1>
                    <div>Clique nas disciplinas abaixo para saber mais detalhes.</div>
                </div>
                <div id='grid-filter'>
                    <div>
                        <select id="">
                            <option selected>TODAS DISCIPLINAS</option>
                            <option value="1">Temos que ativar o auto-complete</option>
                            <option value="2">Curso com um nome grande para caramba para ter certeza de que nós sabemos controlar o limite</option>
                            <option value="3">Outro curso</option>
                        </select>
                    </div>
                    <div>
                        <select id="">
                            <option>Em andamento</option>
                            <option>Concluído</option>
                        </select>
                    </div>
                    <div>
                         <select id="">
                            <option>2022.1</option>
                            <option>2021.2</option>
                            <option>2021.1</option>
                            <option>2020.2</option>
                            <option>2020.1</option>
                            <option>2019.2</option>
                            <option>2019.1</option>
                        </select>
                    </div>
                </div>
                <div id='course-cards'>
                    <div v-for="card in cards" class="course-card">
                        <div class="course-wrapper">
                            <div class="icon_ambiente">
                                <p class="ambiente_card">[[ card.ambiente.sigla ]]</p>
                            </div>
                            <img class="img-fluid" alt="imagem representativa do curso"
                                v-bind:src="[[ card.diario.thumbnail ]]">
                            <div class="progress bg-dark rounded-0">
                                <div class="progress-bar bg-success " role="progressbar" style="width: 100%"
                                    aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                <div class="porcentagem">
                                    <p class="valor_porcentagem">[[ card.diario.progresso ]]%</p>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="card-diario">[[ card.diario.codigo ]]</p>
                                <h5 class="card-title">[[ card.diario.titulo ]]</h5>
                            </div>
                            <div class="card-footer">
                                <div class="flex">
                                    <a class="btn btn-primary" v-bind:href="[[ card.diario.url ]]">ACESSAR</a>
                                    <div class="flex-auto"></div>
                                    <button type="button" class="btn btn-secondary" v-on:click="detailme(card)">DETALHES</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <aside>
                <div id='detalhes-header'>
                    <h2>Detalhes</h2>
                    <div v-if="!destaque" class="dt-text">Mais detalhes sobre a disciplina abaixo:</div>
                    <div v-if=destaque>
                        <p class="dt-text">Mais detalhes sobre a disciplina abaixo:</p>
                        <p class="ambiente_titulo">[[ destaque.ambiente.titulo ]]</p>
                        <img class="img-fluid" alt="imagem representativa do curso" v-bind:src="[[ destaque.diario.thumbnail ]]">
                        <p class="card-diario">[[ destaque.diario.codigo ]]</p>
                        <p class="card-title">[[ destaque.diario.titulo ]]</p>
                        <a class="btn btn-primary destaque" v-bind:href="[[ destaque.diario.url ]]">ACESSAR O CURSO</a>
                        <div v-if=destaque.diario.eventos>
                            <p class="evento">Eventos do curso</p>
                            <p>Não foi possível obter neste instante. [[]]</p>
                        </div>
                    </div>
                    <div v-if=informativos class="informativos">
                        <h2>Últimos informativos</h2>
                        <ul  v-for="informativo in informativos" id="informativos">
                            <li>
                                <a v-bind:href="[[ informativo.url ]]" v-bind:title="[[ informativo.noticia ]]">[[ informativo.titulo ]]</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>
{% endblock main %}
